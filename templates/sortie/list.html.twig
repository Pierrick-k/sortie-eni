{% extends 'base.html.twig' %}

{% block title %}{{  parent() }} detail Sortie{% endblock %}
{% block stylesheets %}
   {#  <link href="{{  asset('css/bootstrap-datepicker.css') }}" rel="stylesheet"/> #}
    <link rel="stylesheet" href="{{ asset('css/sortie.css') }}"
{% endblock %}
{#
{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('js/bootstrap-datepicker.min.js') }}"></script>
{% endblock %}
#}

{% block body %}
    <div>
        {{ form(FiltreSortie) }}
    </div>
    <div class="table">
        <table>
            <thead><tr>
                <th>Nom de la sortie</th>
                <th>Date de la sortie</th>
                <th>Clôture</th>
                <th>Nombre de places</th>
                <th>Etat</th>
                <th>Inscrit</th>
                <th>Organisateur</th>
                <th>Actions</th>
            </tr></thead>
            <tbody>
                {% for sortie in sorties %}
                <tr>
                    <td>{{ sortie.nom }}</td>
                    <td>{{ sortie.dateHeureDebut|date("d/m/Y H:i") }}</td>
                    <td>{{ sortie.dateLimiteInscription|date("d/m/Y") }}</td>
                    <td> {{ sortie.participants|length }}/{{ sortie.nbInscriptionMax }}</td>
                    <td>{{ sortie.etat.libelle }}</td>
                    <td>
                        {% if sortie.isParticipant(app.user) %}
                            x
                        {% endif %}
                    </td>
                    <td>{{ sortie.etat.libelle }}</td>
                    <td>
                        <a href="{{ path('sortie_inscription',{id: sortie.id})}}">Afficher</a>
                        {% if sortie.etat.libelle == "En création" %}
                            <a href="{{ path('sortie_publish',{id: sortie.id})}}">publier</a>
                        {% endif %}
                        {% if sortie.etat.libelle == "Ouverte" %}
                            {% if sortie.isParticipant(app.user)  %}
                                <a href="{{ path('sortie_desinscription', {id: sortie.id}) }}">Se désister</a>
                            {% elseif sortie.participants|length < sortie.nbInscriptionMax %}
                                <a href="{{ path('sortie_inscription', {id: sortie.id}) }}">S'inscrire</a>
                            {% endif %}
                        {% endif %}
                    </td>
                </tr>
                {%  endfor %}
            </tbody>
        </table>
    </div>
    {#
    <script>
        document.getElementsByClassName('js-datepicker').datepicker({
            format: "dd-mm-yyyy",
            language: "fr",
            multidate: false,
            todayHighlight: true
        });
</script>
    #}
{% endblock %}
